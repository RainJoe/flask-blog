webpackJsonp([2],{"2Ed2":function(t,e,i){var o=i("ueud");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i("rjj0")("e908f29a",o,!0)},"il+h":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("mtWM"),a=i.n(o),n={data:function(){return{imgUrl:"",imgId:"",imgName:"",file:"",title:"",desc:"",category:"",body:""}},methods:{backToAdmin:function(){this.$router.push({name:"Admin"})},uploadFile:function(t){var e=this;e.file=t.target.files[0];var i=new FormData;i.append("file",e.file,e.file.name),a()({url:"/api/photos",method:"POST",headers:{Authorization:window.sessionStorage.getItem("key"),"Content-Type":"multipart/form-data"},data:i}).then(function(t){e.imgUrl=t.data.url,e.imgId=t.data.id,e.imgName=t.data.filename}).catch(function(t){console.log(t)})},deletePhoto:function(){var t=this;a()({url:"/api/photos/"+t.imgName,method:"DELETE",headers:{Authorization:window.sessionStorage.getItem("key")}}).then(function(e){t.imgUrl=""}).catch(function(e){t.imgUrl="",console.log(e)})},submitForm:function(){var t=this;a()({url:"/api/posts",method:"POST",headers:{Authorization:window.sessionStorage.getItem("key"),"Content-Type":"application/json"},data:{title:this.title,desc:this.desc,category:this.category,body:this.body,img_id:this.imgId}}).then(function(e){t.$router.push({name:"Admin"})}).catch(function(t){console.log(t)})}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("mu-appbar",{attrs:{title:"Edit"}},[i("mu-flat-button",{attrs:{slot:"right",color:"white",label:"退出"},on:{click:t.backToAdmin},slot:"right"})],1),t._v(" "),i("mu-row",{staticClass:"edit-wrapper"},[i("mu-col",{attrs:{width:"10",tablet:"15",desktop:"25"}}),t._v(" "),i("mu-col",{attrs:{width:"80",tablet:"70",desktop:"50"}},[i("div",{staticClass:"image-wrapper"},[i("mu-card",[i("mu-card-media",[i("img",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl,expression:"imgUrl"}],attrs:{src:t.imgUrl,height:"400"}}),t._v(" "),i("mu-raised-button",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl,expression:"imgUrl"}],attrs:{label:"删除",secondary:""},on:{click:t.deletePhoto}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.imgUrl,expression:"!imgUrl"}],staticClass:"icon-container"},[i("mu-icon-button",[i("mu-icon",{attrs:{value:"photo",size:48}}),t._v(" "),i("input",{staticClass:"file-button",attrs:{type:"file"},on:{change:function(e){t.uploadFile(e)}}})],1)],1)],1)],1)],1),t._v(" "),i("mu-text-field",{attrs:{hintText:"在这里输入标题",fullWidth:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),i("br"),t._v(" "),i("mu-text-field",{attrs:{hintText:"在这里输入摘要",fullWidth:""},model:{value:t.desc,callback:function(e){t.desc=e},expression:"desc"}}),i("br"),t._v(" "),i("mu-text-field",{attrs:{hintText:"在这里输入类别",fullWidth:""},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}}),i("br"),t._v(" "),i("mu-text-field",{attrs:{hintText:"在这里输入正文",multiLine:"",rows:10,fullWidth:""},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}}),i("br"),t._v(" "),i("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"提交"},on:{click:t.submitForm}}),t._v(" "),i("br"),t._v(" "),i("br"),t._v(" "),i("br")],1),t._v(" "),i("mu-col",{attrs:{width:"10",tablet:"15",desktop:"25"}})],1)],1)},staticRenderFns:[]},l=i("VU/8")(n,s,!1,function(t){i("2Ed2")},null,null);e.default=l.exports},ueud:function(t,e,i){(t.exports=i("FZ+f")(void 0)).push([t.i,".icon-container{display:block;height:400px}.image-wrapper{margin-top:20px;margin-bottom:20px}.file-button{position:absolute;left:0;right:0;top:0;bottom:0;opacity:0}",""])}});
//# sourceMappingURL=2.9ea63ff0bd9b050d59aa.js.map